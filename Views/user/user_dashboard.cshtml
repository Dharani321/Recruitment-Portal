@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "User Dashboard";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


    <!--Custom js-->
    <script src="~/ProjectJS/user_js/JS/user_dashboard.js"></script>
    <script src="~/ProjectJS/user_js/JS/login.js"></script>


    <!-- Link to external CSS if needed -->
    <link href="~/Styles/user/user_dashboard.css" rel="stylesheet" />

</head>
<body>


    <!-- Search Section -->

    <nav class="navbar2">
        <p class="navbar2_heading">
            Unlock the future you deserve by exploring high-paying careers, competitive salaries, and top job openings tailored to your industry and location.
        </p>
        <div class="container mt-4" style="padding: 20px;">
            <div class="row align-items-center justify-content-between" style="margin-bottom: 15px;">
                <!-- Left Section: Search Prompt -->
                <div class="col-md-4 mx-1 navbar_search">
                    <div class="title-location-selection">
                        <p class="title-location-selection__normTitle d-flex align-items-center">
                            Find Jobs &#9654;
                        </p>
                        <div class="popup-box"></div>
                    </div>
                </div>

                <!-- Right Section: Search Bar -->
                <div class="col-md-7 SearchBar">
                    <div class="row align-items-center">
                        <div class="col-md-3 text-md-end">
                            <label for="location-search" class="form-label">Select a Location:</label>
                        </div>
                        <div class="col-md-8 Location_Search_Selection position-relative">
                            <select id="location-search" multiple class="form-select" placeholder="Select a location -">
                                <optgroup label="Major Cities in India">
                                    <option value="Bengaluru, Karnataka">Bengaluru, Karnataka</option>
                                    <option value="Hyderabad, Telangana">Hyderabad, Telangana</option>
                                    <option value="Delhi, NCR">Delhi, NCR</option>
                                    <option value="Mumbai, Maharashtra">Mumbai, Maharashtra</option>
                                    <option value="Chennai, Tamil Nadu">Chennai, Tamil Nadu</option>
                                </optgroup>
                            </select>

                            <div class="position-absolute end-0 top-50 translate-middle-y " style=" margin-right: -15px;">
                                <img src="~/wwwroot/CustomImages/Elements/search.png"
                                     style="width: 20px; cursor: pointer;"
                                     onclick="performSearch()" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>



    <!-- Welcome section -->

    <div id="welcomeMessage" class="intro-container"
         style="position: fixed; top: 20%; left: 50%; transform: translate(-50%, -50%); background: rgb(75, 14, 86, 0.9); color: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); width: 320px; font-size: 14px; text-align: center; transition: 0.3s ease-in-out; display: none; z-index:1000;">

        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h3 style="margin: 0 auto; font-size: 16px; flex-grow: 1;">Welcome, <span id="username-placeholder">User</span>!</h3>
            <span style="cursor: pointer; font-size: 18px; color: white; margin-left: 10px;" onclick="closeWelcomeMessage()">✖</span>
        </div>

        <p style="margin: 10px 0 0; line-height: 1.6; font-size: 16px; color: white; font-weight: 500;">
            Ready to explore? <br>
            <strong style="color: #ffd700;">Upload Your Resume</strong> & let us find the best jobs for you! 🎯
        </p>

    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            setTimeout(() => {
                const welcomeMessage = document.getElementById("welcomeMessage");
                welcomeMessage.style.display = "block";

                setTimeout(() => {
                    welcomeMessage.style.transition = "opacity 1.3s ease";
                    welcomeMessage.style.opacity = 0;

                    setTimeout(() => {
                        welcomeMessage.style.display = "none";
                        welcomeMessage.style.opacity = 1;
                        welcomeMessage.style.transition = "";
                    }, 1300);
                }, 5000);
            }, 1500);
        });

        function closeWelcomeMessage() {
            document.getElementById("welcomeMessage").style.display = "none";
        }
    </script>


    <!-- Top Section: Tabs for Job Sections -->
    <div class="tabs-container">
        <div id="your-jobs-tab" class="tab active" onclick="showSection('your-jobs')">
            Your Jobs
        </div>
        <div id="recent-searches-tab" class="tab" onclick="showSection('recent-searches')">
            Recent Searches
        </div>
    </div>

    <hr class="divider" />




    <!-- Job Search Section -->
    <div id="search-job" class="card job-search-card" style="display: none; gap: 20px; margin-top: 50px; background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">


        <!-- Left Side: Job Listings container -->
        <div id="jobs-list-section" style="flex: 1; display: flex; flex-direction: column; gap: 15px;">

            <!-- Sticky Container -->
            <div style="position: sticky; top: -20px; z-index: 10; background-color: #fff; padding: 10px 0; ">
                <h2>All Jobs</h2>

                <!-- Filters Section -->
                <div class="filter-container" style="display: flex; gap: 10px; margin-bottom: 10px;">
                    <select id="categoryFilter">
                        <option value="">Filter by Category</option>
                    </select>
                    <select id="locationFilter">
                        <option value="">Filter by Location</option>
                    </select>
                    <select id="jobTypeFilter">
                        <option value="">Filter by Job Type</option>
                    </select>
                </div>
            </div>

            <!-- Job Listings (Cards will load dynamically on scroll) -->
            <div id="jobs-container" style="display: flex; flex-wrap: wrap; gap: 15px;">
                <!-- Job cards will be appended here dynamically -->
            </div>

        </div>


        <!-- Right Side: Job Details -->
        <div id="job-details-section" style="padding: 0px; border-left: 2px solid #ddd; max-height: 500px; overflow-y: auto;">

            <div class="particular-job-details">
                <h1>Job Details</h1>
                <div class="job-detail-card" id="job-detail-card">
                    <!-- Job details will be dynamically populated here -->
                </div>
            </div>


            <!-- Application Form Modal -->
            <div id="application-modal" class="modal">
                <div class="modal-content">
                    <span class="close-modal">&times;</span>
                    <h3 style="text-align: center; color: #333; font-size: 24px;">Application Form</h3>
                    <form id="submit-application-form" enctype="multipart/form-data">
                        <input type="hidden" id="job-id" name="JobID">

                        <label for="job-title">Job Title</label>
                        <input type="text" id="job-title" name="Title" readonly>

                        <label for="job-category">Job Category</label>
                        <input type="text" id="job-category" name="Category" readonly>

                        <label for="job-description">Job Description</label>
                        <textarea id="job-description" name="Description" readonly></textarea>

                        <label for="experience">Work Experience</label>
                        <textarea id="experience" name="experience" placeholder="Describe your experience" required></textarea>

                        <label for="education">Educational Background</label>
                        <select id="education" name="education" required>
                            <option value="" disabled selected>Select Your Education Level</option>
                            <option value="under_secondary">Under Secondary</option>
                            <option value="secondary">Secondary</option>
                            <option value="higher_secondary">Higher Secondary</option>
                            <option value="undergraduate">Undergraduate</option>
                            <option value="graduate">Graduate</option>
                            <option value="phd">PhD</option>
                            <option value="upper_phd">Upper PhD</option>
                        </select>

                        <label for="resume">Resume</label>
                        <input type="file" id="resume" name="resume" accept=".pdf,.doc,.docx" required>

                        <label for="message">Why are you applying for this job?</label>
                        <textarea id="message" name="message" rows="5"></textarea>

                        <button type="submit">Submit Application</button>
                    </form>
                </div>
            </div>

        </div>
    </div>










    <!-- Notification Section -->
    <div id="notification-section" class="card" style="display: none;">
        <h5>Notifications</h5>
        <ul id="notification-list" style="list-style: none; padding: 0;"></ul>
    </div>

    <!-- Profile Matches Section -->
    <!-- Feedback Section -->
    <div id="feedback-section" class="card p-3" style="display: none;">
        <h5>Application Feedback</h5>
        <form id="feedback-form">
            <div class="mb-2">
                <label>Rate your experience:</label>
                <div class="star-rating">
                    <span class="star" data-value="1">★</span>
                    <span class="star" data-value="2">★</span>
                    <span class="star" data-value="3">★</span>
                    <span class="star" data-value="4">★</span>
                    <span class="star" data-value="5">★</span>
                </div>
                <input type="hidden" id="feedback-rating" value="0">
            </div>
            <textarea id="feedback-text" class="form-control" placeholder="Write your feedback here..." required></textarea>
            <button type="submit" class="btn btn-primary mt-2">Submit Feedback</button>
        </form>
        <ul id="feedback-list" class="list-group mt-3">
            <li class="list-group-item">No feedback available.</li>
        </ul>
    </div>




    <!--Manage Account Section-->
    <div id="manage-account" class="card" style="display: none;">
        <h2>Manage Your Account</h2>
        <div class="container12">


            <form action="#" method="post" enctype="multipart/form-data">
                <!-- Personal Information Update -->
                <div class="form-group1">
                    <label for="first-name">First Name</label>
                    <input type="text" name="FirstName" id="first-name" placeholder="Enter your first name" required />
                </div>
                <div class="form-group1">
                    <label for="last-name">Last Name</label>
                    <input type="text" name="LastName" id="last-name" placeholder="Enter your last name" required />
                </div>
                <div class="form-group1">
                    <label for="phone-number">Phone Number</label>
                    <input type="tel" name="PhoneNumber" id="phone-number" placeholder="Enter your phone number" required pattern="[0-9]{10}" title="Enter a valid 10-digit phone number" />
                </div>
                <div class="form-group1">
                    <label for="email">Email</label>
                    <input type="email" name="Email" id="email" placeholder="Enter your email" required />
                </div>

                <div class="form-group1">
                    <label for="password">Password</label>
                    <input type="password" name="Password" id="password" placeholder="Enter new password (optional)" />
                </div>

                <!-- Update Profile Picture -->
                <div class="form-group1">
                    <label for="profile">Update Profile Picture</label>
                    <input type="file" name="ProfilePicture" id="profile" class="file-input" accept=".jpg, .jpeg, .png, .gif" onchange="previewProfilePicture(event)" />
                    <small>Accepted formats: JPG, PNG, GIF</small>
                </div>

                <div style="margin-top: 10px;">
                    <img id="profilePicturePreview" src="" alt="Profile Picture Preview" style="display: none; width: 150px; height: 150px; border-radius: 8px;" onchange="previewProfilePicture(event)" />
                </div>

                <!-- Update Account Button -->
                <div class="form-group1" style="text-align:center;margin:auto;width:100%">
                    <button type="submit" style="text-align:center;margin:auto" onclick="manageaccount();">Update Account</button>
                </div>
            </form>

            <!-- Back to Dashboard Link -->
            <a href="/user/user_dashboard" class="back-btn">← Back to Dashboard</a>
        </div>

    </div>

    <!-- Search Job -->
    <!--<div id="search-job" class="card job-search-card">
        <div class="card-header search-card-header">
            <h5>Search Job</h5>
        </div>
        <div class="card-body">
            <form id="job-search-form">
                <div class="form-group">
                    <label for="keywords" class="form-label">Keywords</label>
                    <input type="text" id="keywords" class="form-control" placeholder="Enter job title, keywords, or company" />
                </div>
                <div class="form-group">
                    <label for="location" class="form-label">Location</label>
                    <select id="location" class="form-control">
                        <option value="Bengaluru, Karnataka">Bengaluru, Karnataka</option>
                        <option value="Hyderabad, Telangana">Hyderabad, Telangana</option>
                        <option value="Delhi, NCR">Delhi, NCR</option>
                    </select>
                </div>
                <div class="form-group text-right">
                    <button type="button" onclick="searchJobs()" class="btn btn-primary">Search</button>
                </div>
            </form>
        </div>

        <div id="job-results" class="card job-results-card mt-4">
            <div class="card-header results-card-header">
                <h5>Job Results</h5>
            </div>
            <div class="card-body">
                <ul class="list-group" id="job-list">-->
    <!-- Job items will be appended here -->
    <!--</ul>
            </div>
        </div>
    </div>-->
    <!-- jQuery CDN -->

</body>
</html>
